<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Gestão de Biblioteca</title>
	<h:outputStylesheet name="css/styles.css" />
</h:head>

<h:body>

	<div class="header">
		Gestão de Biblioteca
	</div>
	
	<div class="main">
	
		<span class="titulo-pagina">Formulário de Cadastro de Livro</span>

		<h:form id="form-cadastro-livro" styleClass="form-livro-container">

			<h:panelGrid id="panel-cadastro-livro" columns="2" styleClass="input-container">
				
				<h:outputLabel value="Identificador" for="input-id" rendered="#{livroBean.livro.id != null}"/>
				<h:inputText value="#{livroBean.livro.id}" id="input-id" 
					disabled="true" rendered="#{livroBean.livro.id != null}" />
	
				<h:outputLabel value="ISBN(13)" for="input-isbn" />
				<h:panelGroup styleClass="input-campo-e-erro">
					<h:inputText value="#{livroBean.livro.isbn}" id="input-isbn" required="true"
						requiredMessage="#{msg['campo.obrigatorio']}"
						validatorMessage="#{msg['campo.invalido.tamanho']}"
						converterMessage="#{msg['campo.invalido.formato']}">
						<f:validateLength minimum = "13" maximum = "13" />
					</h:inputText>
					<h:message for="input-isbn" styleClass="form-mensagens" />
				</h:panelGroup>

				<h:outputLabel value="Título" for="input-titulo" />
				<h:panelGroup styleClass="input-campo-e-erro">
					<h:inputText value="#{livroBean.livro.titulo}" id="input-titulo" maxlength="100" required="true"
						requiredMessage="#{msg['campo.obrigatorio']}"
						validatorMessage="#{msg['campo.invalido.tamanho']}">
						<f:validateLength minimum = "2" maximum = "100" />
					</h:inputText>
					<h:message for="input-titulo" styleClass="form-mensagens" />
				</h:panelGroup>

				<h:outputLabel value="Autor" for="input-autor" />
				<h:panelGroup styleClass="input-campo-e-erro">
					<h:inputText value="#{livroBean.livro.autor}" id="input-autor" maxlength="100" required="true"
						requiredMessage="#{msg['campo.obrigatorio']}"
						validatorMessage="#{msg['campo.invalido.tamanho']}">
						<f:validateLength minimum = "2" maximum = "100" />
					</h:inputText>
					<h:message for="input-autor" styleClass="form-mensagens" />
				</h:panelGroup>

				<h:outputLabel value="Categoria" for="input-categoria" />
				<h:panelGroup styleClass="input-campo-e-erro">
					<h:selectOneMenu value="#{livroBean.livro.categoria}" id="input-categoria" styleClass="combobox-categoria" required="true"
						requiredMessage="#{msg['campo.obrigatorio']}">
						<f:selectItem itemValue="#{null}" itemLabel="-- selecione --" />
						<f:selectItems value="#{livroBean.categorias}" var="cat" itemValue="#{cat}" itemLabel="#{cat}" />
					</h:selectOneMenu>
					<h:message for="input-categoria" styleClass="form-mensagens" />
				</h:panelGroup>

				<h:outputLabel value="Data de Publicação" for="input-data-pub" />
				<h:panelGroup styleClass="input-campo-e-erro">
					<h:inputText value="#{livroBean.livro.dataPublicacao}" id="input-data-pub" a:placeholder="dd/mm/aaaa"
						converterMessage="#{msg['campo.invalido.formato']}">
						<f:converter converterId="MeuLocalDateConverter" />
					</h:inputText>
					<h:message for="input-data-pub" styleClass="form-mensagens" />
				</h:panelGroup>

				<h:outputLabel value="Nro de Páginas" for="input-paginas" />
				<h:panelGroup styleClass="input-campo-e-erro">
					<h:inputText value="#{livroBean.livro.nroDePaginas}" id="input-paginas"
						validatorMessage="#{msg['campo.invalido.tamanho']}"
						converterMessage="#{msg['campo.invalido.formato']}" >
						<f:validateLongRange minimum = "1" maximum = "9999" />
					</h:inputText>
					<h:message for="input-paginas" styleClass="form-mensagens" />
				</h:panelGroup>

			</h:panelGrid>
			
			<h:panelGroup styleClass="botao-container">
				<h:commandButton 
					value="#{livroBean.livro.id == null ? 'Cadastrar' : 'Atualizar'}" 
					action="#{livroBean.salvar}" styleClass="btn-salvar"/>
			</h:panelGroup>
		
		</h:form>
		
		<h:link value="Voltar" outcome="listagem" styleClass="btn-acao btn-link-livro" />
		
	</div>
	
	<div class="footer">
		Desenvolvido em - 2022
	</div>

</h:body>
</html>